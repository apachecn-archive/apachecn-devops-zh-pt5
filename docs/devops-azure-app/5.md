# 5.最后的想法

本章回顾了前几章的讨论。

## 面向 Azure 的 DevOps

第 [1](1.html) 章介绍了基本的 DevOps 概念。回想一下，如果没有 DevOps，手动软件部署过程容易出错、耗时且效率低下，这是因为缺乏强大的流程集成和糟糕的团队沟通。手动过程也会降低性能。

DevOps 解决方案取代了应用程序部署的手动流程，其中 DevOps 自动化了软件开发和部署的整个流程。DevOps 将开发和运营/生产团队的功能集成到应用程序部署流程中。DevOps 最重要的功能之一是其自动化应用程序部署过程的能力，允许多个开发人员同时在源代码库中签入和签出代码，等等。

在 DevOps 应用程序部署过程中，开发人员编写代码并将其签入源代码控制/源代码存储库。持续集成(CI)服务器生成构建。在构建过程中，会执行几项任务，包括自动化单元测试、代码覆盖和代码分析。如果有错误，会自动生成一个报告并发送给开发人员，以便在代码中进行更正。然后，为成功的构建创建一个发布，在其中开始测试、QA 和准备操作。一旦有了成功的版本，该版本将被部署到目标环境—Microsoft Azure Cloud。第一章还介绍了一些不同的 DevOps 工具。

## 通过 TeamCity 和 Octopus Deploy 部署

第 [2](2.html) 章概述了如何使用最佳工具在 Azure Web 应用程序上部署一个包——一个持续集成(CI)工具(TeamCity)和一个持续交付(CD)工具(Octopus Deploy)。TeamCity 是一个面向 JetBrains 开发人员的持续集成服务器。

使用 TeamCity，我们演示了如何创建一个项目，并通过提供 SVN (subversion)路径来指定构建配置，以包含最新的代码，并将其放置在构建代理中。我们的过程在 TeamCity 中创造了一个成功的构建。之后，我们为 PowerShell 脚本文件配置了源代码并设置了参数。已修改目标路径设置以创建 NuGet 包。这个包裹被放在 Octopus Deploy 可以到达的地方。

Octopus Deploy 是一款自动化部署服务器，可以简化和自动化不同应用程序在不同环境中的部署过程。这一过程因此变得几乎毫不费力。使用 Octopus Deploy，我们创建了一个项目。然后，我们创建了两个环境并上传了包。我们还在那个包中创建了两个步骤，并且我们为这个项目创建了一个发布。最后，我们部署了该版本，部署的结果是在 Azure 网站上成功部署了 NuGet 包的内容。

## 通过 VSTS 部署

第 3 章讨论了使用一个完全集成的 DevOps 平台部署一个 web 应用程序，这个平台叫做 Visual Studio Team Services (VSTS)。

VSTS 是一个合作的 CI-CD 解决方案。这意味着 VSTS 管理整个软件开发生命周期，从创建包到部署应用程序。这是一个基于云的环境，这意味着它每周 7 天、每天 24 小时都可用，没有任何管理或运营开销。

使用 VSTS，我们首先创建了一个帐户来托管这个项目，并且我们在这个帐户下创建了一个项目。然后，我们将源代码添加到项目中，并对源代码做了一些更改。然后我们提交变更并创建一个构建。一旦构建成功，就创建了一个发布定义。发布定义描述了应用程序的端到端发布过程，以便它可以部署到不同的环境中。在创建发布定义之后，我们添加了可以部署应用程序的工件和环境。然后，创建了一个版本。发布是一个完整的包，它包含环境、任务步骤、变量和发布策略的快照，用于执行发布定义中的所有操作。创建发布后，我们将其部署到在 Azure 上创建的资源组。该版本已成功部署在 Azure 上。

## Azure 应用程序部署

第 [4](4.html) 章将我们在前面章节中介绍的内容应用到使用 VSTS 的 Azure 应用程序部署中。我们在 Azure 上创建了一个虚拟机，并安装了一个名为 Magento 的电子商务应用。我们通过 VSTS 提交了对源代码的修改，并将修改部署在 Azure 上运行的 Magento 应用程序上。创建并部署了一个版本，以查看对源代码所做更改的效果。

现在，您已经完成了一步一步的过程，并提供了关于过程和可用工具的更多详细信息，您已经非常熟悉并接受了充分的培训来利用连续部署和手动部署方法。