第
6 章

生产启动

发布通常是将新网站和应用程序投入生产的整个过程中最容易的部分。大部分测试应该已经完成，所以很多只有在随机生产流量到达站点或应用程序时才会出现的错误很可能已经被发现。参与的团队将简单地遵循在预发布阶段的审查期间确定的脚本，该过程主要是执行清单上的步骤或启动自动脚本以执行实际发布并向公众展示新网站或应用程序。

开发和运营团队在发布期间合作尤为重要，因为如果出现问题，这些团队必须快速识别和评估这些问题，以确定任何错误或缺陷给业务带来的困难，以及它们是需要立即解决还是稍后解决，或者是否应该完全恢复发布。

发布通常包括开发人员和运营工程师并肩坐在一起，执行在预发布阶段商定的脚本或清单。如果正确利用自动化系统，新网站或应用程序的整个启动过程不会超过几个小时。新应用程序越复杂，发布所需的时间就越长，影响发布时间的因素有很多，例如发布地点的数量、内容交付网络的传播以及工程团队在发布流程中的自动化程度。

了解流程

发布一个新的 web 应用程序可以理解为一个过程和两个体验——以及一个好的应急计划。魔鬼总是在细节中，最后一分钟的变化可能会完全破坏一个新网站或应用程序的启动，这就是为什么必须有一个深思熟虑的启动程序。确定开发和运营团队如何与管理层互动的一些常见问题是这幅图的关键部分。在构建成功的网站或应用程序之前，团队在业务及其管理环境中的工作方式，以及妨碍工程效率的常见问题，都必须在创建新 web 项目的第一个设计规范之前得到解决。在进行任何新的 web 开发项目之前，必须考虑工程的人的因素，因为任何新项目在创建时都会有许多未知的和意想不到的结果和问题。

启动一个全新的 web 应用程序或网站与更新一个现有的 web 应用程序或网站之间的本质区别在于，没有关于应用程序将如何运行、会出现什么错误或维护该应用程序需要多少支持工作的历史数据。在将新应用程序发布到生产环境中之前，只能进行这么多的调试，许多错误、缺陷和意外行为只有在应用程序启动并受到生产流量影响后才会出现。

不管一个新的 web 应用程序预期或打算得到多少使用，在全面推广之前在生产环境中测试该应用程序是至关重要的。在网站上线之前，软件开发人员、质量保证工程师和运营工程师只能对应用程序在生产中的实际表现有一个局部的了解。

网站的概念开发:*构思*

在消费者或最终用户会大量使用的 web 开发项目中，那些成功的项目是那些经过深思熟虑的项目，而那些结果最好的项目通常会雇佣工业设计师或工程师。工业工程师的职责是将业务目标、技术规格和其他相关因素转化为模型或原型，并将其呈现给建筑师或梦想家，他们的职责是创造新事物。想出一个真正创新的东西，而不是复制其他东西，是非常困难的，当谈到网站时，我们所做的很多事情已经做过很多次了。

当构思一个网站的新版本时，甚至在项目开始之前就必须考虑一些事情，例如规模和范围、技术复杂性、成本和可用的基础设施。没有拥有、管理或大量参与(作为工程师)生产网站或一些高技术价值网站的人，可能对支持高流量网站所需的基础设施没有足够的了解，例如支持每天数百万或更多访问者的网站。此类站点需要在机架空间、冷却和电力方面进行大量投资。然而，大多数创业公司并不马上需要这种类型的投资。成长通常需要时间。尽管如此，考虑在任何给定的时刻最初有多少用户会访问网站将有助于构思阶段。

构思的基础问题

在构思阶段，有许多基本问题需要回答；其中最重要的也许是“我们试图解决什么问题？”或者“这将如何使某人的生活变得更容易？”对于一个应用程序，你必须问它将如何被使用，为什么有人会使用它，有多少人会使用它。人们很容易被一个新网站的“愿景”所困扰，比如一个特定群体的社交网络，或者是一个包括并绑定所有社交网络的终极社交网络聚合器。但是焦点总是应该回到基础问题上来。

有数以百万计的网站、移动应用程序和软件包已经解决了数以百万计的具体问题。那么，如果以前已经做了这么多事情，为什么有人会决定建造新的东西呢？不是所有的网站都做得好。许多很难使用，缓慢，没有吸引力，令人困惑，很少或没有替代品。这些原因中的任何一个都可能足以建立一个新的网站，而最好的原因可能仅仅是你有一个全新的想法，或者一个改进现有网站的方法。MySpace 是为满足需求而创建的“更好”网站的典型例子。MySpace 的创建是因为在 Friendster 上，乐队无法建立自己的网页和分享信息，所以 Tom Andersen 和他的同事们开始建立一个社交网络，音乐家和乐队可以在这里创建自己的个人主页。从本质上讲，MySpace 与 Friendster 没有什么不同，但它想改进一些东西。今天，虽然 MySpace 仍然存在，但脸书是领先的社交网站。我记得那时脸书只对那些有身份证的人开放。edu 域名，与 MySpace 的受欢迎程度相比，它甚至没有被考虑在地图上。Friendster、MySpace 和脸书本质上都做着同样的事情——让人们与朋友分享和联系。一个在另一个的基础上改进，然后在自身上改进，每个都有越来越多的特点和创新。促使脸书成长和成功的是一致、干净的设计，以及主要关注朋友们在做什么的用户界面，而不是定制页面和快速添加尽可能多的朋友。在某些时候，这些社交网络的创始人会问自己一些关于建立网站的基本概念问题:

1.  我要解决什么问题？
2.  我如何让别人的生活变得更轻松？
3.  为什么会有人用？
4.  谁是我的竞争对手？
5.  我怎样才能比我的竞争对手做得更好？
6.  我的网站有什么独特之处？
7.  我的预算是多少？

这些问题不仅适用于社交网络，也适用于任何正在创建的网站，现在也适用于所有移动设备和其他互联设备。当然，互联网和网络也有局限性。最终，网络只是一个带有视觉和听觉界面的自由交流。在最基本的层面上，网络是人类表达的一种形式；是的，它因此可以服务于崇高的目标，如解决世界饥饿，但这样做可能会证明对任何一个组织来说都难以完成。在构思时，重要的是要记住解决问题的范围，并对资源和预算限制持现实态度。仅仅创建一个网站来尝试和收集捐款，并教育人们关于世界饥饿的知识，这将是一项巨大的事业，需要大量的资金才能成功起步，但如果愿景经过深思熟虑，这是可能的。

成本/效益分析

在编写任何代码之前，组织的业务部门和工程团队应该会面并计算出生产和维护应用程序的成本，以及业务部门继续使用它是否有意义。许多组织在规划阶段不涉及开发和操作团队，并且指令是在没有与工程团队进行任何协商的情况下由上层管理人员下达的。事实上，工程团队可能会告诉企业，购买某些硬件、软件或雇佣员工对于支持现有的 web 属性是必要的，这些可能会影响企业未来一两年的新项目计划和预算。业务和工程团队必须在规划阶段会面，以平衡支持现有项目和构建可产生收入的新项目的成本。通过从一开始就让工程参与进来，管理层可以更深入地了解如何更好地利用现有的应用程序和基础设施来支持新的软件开发计划。

建议企业在开始构建新网站或应用程序之前进行成本/收益分析似乎有点基础，但许多企业在执行此过程时并不考虑其工程团队的意见，这可能意味着选择一个可能只需最小努力即可构建并提供高回报的 web 应用程序，还是选择一个可能不太可能在创收或发展业务方面产生实际结果的大规模项目。

一旦业务管理人员、工程人员和运营人员之间的这种思想交流开始，双方将更好地了解预期的情况，并可以合作规划期望的结果，这是在构建支持业务计划的网站和应用程序方面做出更好决策的必要步骤。

特殊项目组

拥有一个特殊的项目团队是准备建立和运行新网站和应用程序的一个很好的方式。与一个特殊的项目团队一起开发一个新网站类似于用一辆液压铲车来提升重物，而不是试图用一个三人团队来提升重物。特别项目小组的必要专业知识因组织而异，这取决于业务的性质以及所使用的各种平台和技术。一般来说，致力于构建和启动新网站项目的特殊项目团队将由任何大型网站的典型职位组成，如下所示:

*   前端工程师(精通 HTML、JavaScript 和 CSS 的开发人员)
*   数据架构师
*   应用程序架构师
*   数据库开发人员
*   运营工程师
*   质量保证工程师
*   网络工程师
*   高级应用程序开发人员
*   移动工程师
*   集成工程师
*   性能工程师
*   安全工程师
*   具有软件开发经验的项目经理

特殊项目团队中的工程师与组织中其他人的主要区别在于，他们在从头构建*新的*应用程序方面经验丰富，与维护其他人的应用程序的工程师相比，这需要完全不同的技能和心态。在特殊团队中，工程师可能会在团队中的多个其他角色中拥有经验，这给了他们一定的广度，这与在其职业生涯中一直担任单一角色的工程师不太常见。

最重要的是，特别项目小组的成员应该轮换，这样不同技术和新计划的接触就可以平均分配，而且理解新技术的责任也不总是放在同一个小组，尽管许多老手可能是小组的基石，并经常留在小组中。

营销

与营销网站相比，建立一个网站，即使是一个有许多特点和功能的复杂网站，也是微不足道的。创业是难以置信的困难，任何生意，其中最难的部分是营销。营销是推销产品和服务的行为，希望人们会购买这些产品和服务。营销预算在构思阶段很少被关注，因为初创公司的创始人太热衷于他们的*想法*以至于他们没有关注与新网站相关的基础问题。我绝不是营销专家，但我喜欢阅读我想了解更多的某一主题的教科书，并参加相关会议，例如，在这种情况下，美国营销协会会议。

关于营销一个新的网站或应用程序，我学到了一些东西，希望在你冒险投资几千或几十万美元做广告之前，这些东西能节省你的时间、精力和金钱。

首先，要有好的产品或服务。第二，有一个好的网站。如果你的网站是你唯一的产品或服务，你就本末倒置了，应该重新思考你的概念。你需要考虑:

*   可靠性
*   到达
*   安置质量
*   网站的营销设计

开始出现的问题是:网站的设计是否适合营销？人们在网站内谈论、讨论和分享信息容易吗？或者至少，让访问者快速方便地引导其他人访问网站容易吗？

这些都是关键问题，将有助于减少花费在广告、员工和努力上的钱，这些都是吸引人们访问网站所需要的。一旦人们被吸引到网站上，就变成了如何将访问者转化为销售的问题。只有像脸书和谷歌这样的大型网站才能依靠大量用户支持大量融资，直到他们找到创收的方法。实际上，大多数公司都没有这种奢侈。

设计发射的要素

一个网站的设计不仅仅是审美。有些网站更吸引人，有些网站更实用，但艺术和科学的结合创造了你会记住并返回的网站，而不是你只在必要时使用的网站，如网上银行网站。一个是体验，一个是用来满足某种目的的工具，比如转账。结合艺术和工程的网站是那些当用户简单地访问网站时为他创造一种体验的网站。造成这种差异的因素是弥漫在网站中的艺术灵感。

例如，艺术灵感可能会让用户感觉好像在水下一样，或者使用留白、3D 技术和动画缩放菜单来提供一种扩展感。当然你必须考虑:

*   谁会使用网站？
*   网站将如何使用？
*   有多少人会使用网站？

在创建一个概念的过程中，一个新的网站开发努力中最有价值的部分是讨论阶段。在为工业设计师制定任何规范之前，在起草任何模型之前，人们应该聚在一起，讨论他们试图建造的是什么以及为了什么目的。这解决了开始构建时遇到的一些常见问题。讨论阶段有助于获取存在于某人头脑中的想法，并通过诸如“如果会怎样”和“将会怎样”等问题将它们带入现实

例如，假设您要建立一个本地社交网站，使一个小社区能够讨论出现的共同问题，这将有助于创建一个有重点的议程，使地方政府会议更有成效。在实际开始之前，对于构建这个新应用程序的工程团队来说，在开始制定任何技术或业务规范之前，坐下来讨论站点应该如何工作是明智的。

会议成员可能包括一名工业工程师、一名 web 开发人员、一名运营工程师、一名从事资金工作的业务人员以及一名市议会成员，他们将坐下来讨论他们希望从这个项目中获得什么，为了便于讨论，我们称之为 NeighborhoodNet。首先要考虑的主要约束是根据构建这样一个项目的可用预算来考虑高层次的目标。

假设这个项目的可用预算是 500，000 美元，对于这样规模的项目来说，这是一个很大的预算。现在假设一个高层次的目标是建立一个当地居民的数据库，一旦它启动，就会被邀请加入 NeighborhoodNet，但结果是收集所有当地居民的信息将花费 100，000 美元，占项目总预算的五分之一。这个目标很有可能在讨论的早期就被放弃，并且在工作开始之前就放弃。重点是提出项目的所有主要目标，并在起草任何规范之前考虑预算内的可行性。米开朗基罗说，在创作大卫雕像时，他只是简单地移除石屑，直到剩下的就是大卫，在规划一个大型甚至小型网站的建设时，这种做法是相同的。

在进入规范阶段之前，这里有一些关于邻居网的讨论的例子。这些最初可能被表达为简单的愿望清单项目，最终将被评估以确定它是否可行。

邻里网络讨论第 1 部分，高级目标:

*   我希望该网站有能力确定我的社区道路坑洼的确切位置。
*   我想要一个邻里守望移动应用程序，将与网站集成，并提醒其他人在附近可疑的人。
*   我希望该网站的灵感来自瓷砖马赛克，因为在镇中心众所周知的马赛克，这是一个街区的象征，并赋予它的性格。

高层次的目标不应该充斥着微小的细节。微小的细节可以完全破坏一个 web 开发项目，并且可以减缓或者完全阻止一个项目达到它的高级目标。当然，您确实希望跟踪所需的细节，因为它们将有助于在规划和构思阶段形成项目的愿景，而此时成品只不过是一幅模糊的图片。详细信息可能如下所示。

邻里网络讨论第 2 部分，设计细节:

*   网站上的按钮应该有圆角
*   所有提交的内容都应发送到审核队列，供管理员批准或不批准。
*   应该有 JavaScript 工具提示向首次访问者展示如何使用网站，而不需要他们阅读大量的文档来学习浏览网站。

灵感和愿景

当建立一个网站时，通常很难弄清楚如何以及什么会激发设计和布局。例如，我的朋友 Javier Mozo 是一名工业设计师，我会和他讨论创建一个新网站。我可能会看着迈巴赫奔驰，对哈维尔说，我希望该网站以某种方式整合迈巴赫奔驰汽车的内部和天窗。作为一名 web 工程师，我可能没有审美和设计能力来设计一个看起来像迈巴赫内部的网站模型。我可能有我脑海中的愿景，但没有能力将模型变成现实。与工业设计师一起工作的好处是，这正是工业设计师的工作——从某人的愿景中创造一个实际上可以成为现实的设计。重点是，我可以从自然、娱乐、天文、情感，或者几乎任何事物中获取一些东西，并用它来激发另一种艺术形式。这是最好的艺术灵感，它不仅仅是创建一个网站。重要的是，当创建网站时，有一个愿景，并且有人有艺术和设计能力来实现这一愿景，将更容易提出令人满意的美学设计和布局。

建筑物

一旦所有的计划都完成了，模型也完成了，建立网站应该是相对简单的。最初的努力:构思、设计、讨论、计划和组建合适的团队是最耗时的，所以如果所有这些步骤都做得恰当，并且所构建的内容不包括一些新发明的技术，那么构建网站应该是相当简单的。如果网站没有使用很多第三方 API 或封闭源代码软件包，那么根据蓝图建立实际的网站应该不会花太多时间。

当事情不按计划进行时

不幸的是，有时事情不会按照计划进行，项目的时间表会被大大推迟。这通常不是因为工程团队不知道如何完成某件事，也不是因为钱用完了，而是因为一开始就没有清楚地传达期望。

一般来说，这意味着项目的定义范围没有明确传达给客户或委托该网站的经理。如果在开始任何开发工作之前，预先制定了良好的规范，这种情况通常不会发生。解决这个问题最简单的方法就是告诉他们网站是软件，软件有生命周期。像任何生物一样，网站由不同的部分组成，在这种情况下是软件，可能包括数据库、一个或多个协同工作的应用程序、第三方 API 和数据馈送以及其他类型的集成，所有这些在某种程度上都是驱动动态网站的代码。代码是不断更新的，因此，网站是一个不断变化的东西。

研究和开发网站

研究和开发网站正在建设一些以前从未做过的事情，就可用技术而言，这是一个未知的领域。这类项目不是为产品发布而设计的；它们主要是为了在没有现成解决方案的地方创造某种新技术。任何设想的解决方案都被认为是实验性的，所以还没有人真正探索过这个领域。这些类型的项目，尽管它们可能有一个时间表，但通常不会有一个真实或现实的截止日期。不要试图设计新的东西，除非绝对必要，或者有时间和资源在不干扰常规业务目标的情况下这样做。

这些类型的项目涉及许多团队和团体的合作，以创建一种全新的技术，从而解决一些常见的问题或使许多人受益的解决方案。如果没有互利或经济上的激励，这种合作通常是无法实现的，大多数时候两者都有。例如，用于在网站之间传输登录凭证的 OAuth 协议(当用户想用他的谷歌或脸书账户登录网站时)就是出于一种共同的需要而开发的。OAuth 最初是一个研究和开发项目，随着时间的推移，通过大公司的努力得到了发展，这些大公司在开发上投入了大量资金，并且希望看到协议的成果。

测试

web 项目在投入生产之前的实际编程将遵循标准的软件开发生命周期规则。根据第 3 章中的指导方针，将一个新的应用程序投入生产的不同之处在于，将更加严格地强调对应用程序及其各个组件的测试。然而，在这里，这些应用程序的性能通常是未知的，并且还没有应用程序的使用数据，所以性能需求只是粗略的估计。可以考虑类似 web 应用程序的历史性能数据，以帮助改进这些估计。主要思想是，当开发一个新的应用程序时，为应用程序设置粗略的性能要求是特殊项目团队必须注意不要做的事情。例如，特殊项目团队可能会说，一个新的 web 应用程序需要每秒能够支持 500 个最终用户请求，该应用程序将为用户提供房地产市场上取消抵押品赎回权的定价信息。无中生有地提取这一指标，并在没有任何业务原因的情况下任意地瞄准它，这种做法可能会浪费时间和宝贵的资源。如果企业有一个类似的应用程序，它只需要每秒处理 100 个请求，那么新的应用程序不太可能需要每秒支持 500 个请求。此外，支持每秒执行 500 个请求的应用程序可能要困难得多，并且需要两倍的硬件投资来支持这一目标。

结束用户测试

最终用户测试应该在由不同类型的用户和目标人群组成的焦点小组中进行。焦点小组应该有机会测试网站并提供反馈。不管使用什么工具来衡量用户与网站的互动，用户都应该尽早参与进来，开始转动轮子和旋钮，并向网站体验团队提供反馈，说明网站的导航和布局是如何工作的，以及使用起来有多简单和直观。这是应该在早期发生的事情，因为一旦网站的主要导航设置好了，就很难改变了。最好的想法是至少有三个不同版本的用户界面，用户可以在发布周期之前尽早测试。

性能测试

性能测试是推出新网站和新代码的关键部分。彻底的性能测试计划可能意味着一次成功的发布和一次不成功的发布之间的差别。

当启动新的站点和应用程序时，性能测试尤其重要，因为没有关于应用程序执行情况的历史数据。应用程序框架、平台和硬件中的新技术也可能会发挥作用。硬件变化的速度非常快，新发布的硬件与六个月前订购的硬件相比，其应用程序的性能结果可能会有很大的不同。

性能测试应该在早期进行，在开始开发工作之前，应该测试新产品的所有组件。如果新硬件的性能是传统系统硬件的两倍，这将降低对应用程序架构的要求，从而产生与过去开发的应用程序相同的性能结果。

一旦有了一个可访问的、功能性的 web 应用程序，就应该向最终用户公开这个新应用程序，方法是计量这个新应用程序的一小部分带宽(如果它正在替换一个旧应用程序)，以查看新代码的执行情况。这种“在生产中测试”的方法提供了有价值的见解，让我们了解一旦生产流量进入应用程序，应用程序将如何执行。您还可以通过解析 web 日志的历史来模拟 web 应用程序的生产流量，并将其应用于新的应用程序，以观察它在生产中的表现。但是，这仍然是一个综合测试，不会产生与使用来自真实浏览器的真实流量测试 web 应用程序或来自公共互联网用户的客户端应用程序相同的结果。通过测量点击新应用程序的流量，或在现有网站上向一小部分用户展示新应用程序，您可以获得有价值的见解，了解应用程序在完全启动并接收生产流量后将如何运行。

本地性能测试

web 开发人员应在专用服务器上设置 web 应用程序的实例，该服务器类似于新网站、应用程序和数据库或构成网站的数据存储将驻留的环境的硬件和配置。为每个 web 开发人员建立一个类似生产的环境是不可行的。然而，重要的是他们拥有最好的可用资源，这些资源*非常类似于*他们将部署成品的生产环境。这可能意味着 web 开发人员拥有一台塔式工作站，但其处理能力与运行生产网站的服务器相当。这确保了开发应用程序的环境尽可能接近它最终运行的生产环境。

确保网站或应用程序的性能尽可能接近面向客户的环境的另一种方法是简单地在类似生产的测试环境中开发。这取决于快照计划的进展情况，以及存在多少预生产或暂存环境，但这将节省大量时间，因为您通常无法从本地开发人员工作站判断 web 应用程序在进入生产环境后的真实性能。

本地测试可以简单地通过使用一些自动化工具或浏览器插件来完成。最好是使用真实的 web 浏览器来测试 web 应用程序的性能，因为这将提供更真实的网站性能视图。大多数网站都是动态的，自动化工具，如 Jmeter 或 Apache Bench，称为合成测试，不会呈现动态内容，如 JavaScript 和 CSS，可能会影响网站的响应时间。有一个叫做 HammerHead 的工具，它可以在 Firefox 中一遍又一遍地重新加载网页，并清空缓存，让 web 开发人员了解加载一个网页需要多长时间。Firebug 是另一个实用程序，它提供了关于 web 浏览器渲染一个网页(包括所有动态内容)需要多长时间的便利信息。

如果在本地测试中，页面加载时间超过 1 到 3 秒，那么非图形密集型站点可能有问题。众所周知，大多数互联网用户缺乏耐心，不习惯等待，尤其是随着宽带互联网的普及和普及。拨号上网的时代已经过去，用户不明白数据库必须做一些繁重的工作才能呈现一个网页。因此，当测试 web 应用程序时，如果它没有在一到三秒内呈现，您可能需要在加载的静态内容量或需要完成的前端工作量方面做一些调整。

缓存

许多公司做出的一个潜在的糟糕决定是与内容交付网络(CDN)签约。CDN 通常充当 web 内容的反向代理，因此 CDN 公司在全国各地配置 web 服务器，很像一家 web 性能监控公司。CDN 不是让带有网络浏览器的服务器定期检查你的网站的加载速度，而是实际上在全国或全世界存储你的网站服务器的副本。拥有 CDN 的原因是，例如，如果您的 web 服务器在加拿大的多伦多，并且有人从堪萨斯州的威奇托访问该站点，那么往返时间就是将数据从多伦多加载到威奇托所需的时间。相比之下，CDN 使用 web 服务器上的反向代理在本地缓存内容，因此当有人从威奇托访问网站时，响应来自威奇托的 CDN 公司服务器，而不是多伦多的原始服务器，这大大减少了响应时间。

许多 CDN 公司现在正在添加 web 性能最佳实践，并将它们融入到他们的服务中，例如压缩、缩小或压缩 JavaScript、HTML 和 CSS 内容，甚至添加一层 web 应用安全。这些都是制作网站上的优秀服务，并使其性能更好，但工程师必须警惕依赖这些“罐装”服务来解决性能中的问题和缺点。缓存是加速和提高站点性能的一个很好的方法，但是它不是解决性能问题的有效方法，这些问题应该在开发者的本地工作站上解决。

代码 分析

当开发新的应用程序时，代码会以极快的速度移动并频繁更改。即使有高级开发人员，新应用程序中的 bug 和错误也会比那些经过一段时间的生产审查的应用程序中的 bug 和错误多得多。正因为如此，源代码应该由第三方审查。QA 工程师(软件开发人员，其主要职能是审查应用程序的功能，但也在源代码级别了解应用程序)不参与实际编写软件，即使在启动新的 web 应用程序的时间表最紧迫的情况下，也会在代码质量方面产生更好的结果。

这种流程和反馈循环还将有助于在站点或应用程序投入生产测试之前，运营部门遇到尽可能多的问题。根据运营工程师的经验和角色结构，运营工程师应该能够帮助确定代码中的问题所在，并与 web 开发人员和 QA 工程师进行沟通，甚至自己解决 bug 并将其签入。

生产测试

应用程序的性能应该符合其预计的使用情况。如果在任何给定时刻使用这项新服务的人数不超过 100 人，那么试图达到每秒 300 个同时连接的性能目标是没有意义的。这种任意的性能指标是浪费时间，并可能在新网站发布的质量保证部分引入严重的延迟。

虽然作为工程师和工程经理，我们希望从应用程序中获得最大的回报，但这不应该成为团队的首要关注点，而以最终用户响应时间为代价。衡量最终用户真实响应时间的唯一方法是在一个国家或世界的所有地理区域设置服务器，并定期访问网页，例如每 15 或 30 分钟访问一次。这就是所谓的真实浏览器性能测试，这是一种长期的方法来监控 web 应用程序的性能。这是了解网站或应用程序如何运行的最有效的方法之一。通常，这些流程由第三方公司执行，该公司代表其客户在整个指定区域进行测试。Keynote 和 Gomez 是两家执行这项服务的知名公司。对于大多数企业来说，建立这种类型的基础设施成本太高，而且是对资源的巨大浪费，而回报却很少。因此，利用那些核心能力是提供 web 性能监控和测试服务的公司提供的服务是最有意义的。

生产测试并不一定意味着将一款新产品投入生产，以观察它的表现，如果进展不顺利，这可能会对你的品牌和声誉造成极其不利的影响。当你引入一个新功能或者对一个现有网站的主要部分进行修改时，最好是拿出一小部分流量，向这些用户展示网站的新功能或新部分。一旦应用程序在内部进行了全面测试，了解生产用户流量将如何导致新应用程序、站点或功能的运行是非常有益的。但是，这种做法必须有所保留，因为该特性只介绍给一小部分用户，并不代表全部负载。但是，它很有用，因为它提供了以下数据:

*   除非在生产负载下，否则不会出现的错误和行为
*   受欢迎程度数据:有多少用户被吸引并最终使用了新功能
*   性能指标

这种实践可以通过使用基于 URL 和流量百分比的负载平衡器来疏导流量来实现。例如，包含新代码的 web 或应用程序服务器的 URL 可能是/beta/player，并且可能位于 10.10.100.0 网络上的服务器场中。大多数负载平衡器可以配置为只有特定百分比的流量或会话由包含新应用程序或模块的应用程序或 web 服务器提供服务。

一旦在受控生产测试环境中收集了一些性能和日志数据，就可以对其进行审查，并与内部和合成测试特征进行比较。

如果这不仅仅是一个现有网站的新功能，而是一个从未推出过的新功能，测试就更加重要了。许多初创公司或全新网站所做的是发布一个邀请页面，并邀请一些精选的用户试用他们的服务。这里的要点是，这些用户选择加入，并清楚地意识到他们正在作为 beta 测试人员，以帮助确定在正式公开发布之前需要进行哪些更改。进行广泛的内部测试和有限数量的生产测试，以及将生产使用和错误数据的结果与内部测试数据进行比较的过程是相同的，只是限制访问新网站的方法是由选择加入列表控制的，而不是自动使用负载平衡器或基于某些标准(如年龄)识别用户的标记系统。

安全测试

Web 应用程序和其他软件一样，容易受到攻击，也有弱点。因此，安全测试是启动新网站的一个重要方面。这通常是构建和启动网站的一个被忽视的方面，但它是该过程中很有价值的一部分，可以发现意外的错误、意外的功能和用户体验问题*以及*网站中可能导致系统受损的可利用方面。将安全测试作为标准产品发布流程的一部分将被证明是非常有益的，并且会产生比标准压力测试和用户流量监控单独产生的更多的应用信息。关于“模糊化”web 应用程序的主题，或者将随机行为应用于软件，看看它是否能够以优雅的方式处理这些行为，或者它是否会像纸牌搭的房子一样倒塌，有许多好书，这个过程不应该被忽略。

安全测试应该是任何新产品发布的关键部分，不应该是事后的想法。一旦有了可以测试的应用程序，就应该开始测试，并在开发过程中和发布后继续测试。渗透测试工作最好由专门检测 web 应用程序中的漏洞和弱点的安全工程师来领导，他试图在最终用户访问新应用程序之前发现安全问题。Metasploit 框架或 WebScarab 项目是可以在渗透测试过程中使用的软件的很好的例子。

网络应用扫描仪

大量的商业或开源 web 应用程序漏洞扫描器都可以在市场上买到，而不是指出哪一个是最好的，在本书出版时可能已经过时了，我只是想提倡使用它们。这些漏洞扫描器可以分析网站或 web 应用程序的结构，就像搜索引擎一样，然后对网站应用各种常见的漏洞。这不仅可以发现新开发的网站或应用程序中是否存在常见的漏洞，还可以为应用程序创建场景和使用模式，这些场景和模式通常会产生意想不到的行为，从而向软件工程团队揭示他们可能需要在代码中改进的地方。因此，扫描仪不仅是一种安全工具，也是一种质量保证工具。在对新软件进行漏洞扫描之前，不得向公众发布或提供任何新软件。

将集成到 QA 流程中

理想情况下，漏洞扫描应该自动化并集成到 QA 流程中。您的质量保证测试套件应该在新的代码发布到 web 环境之后开始漏洞扫描。这强化了一种安全测试文化，而不是一种只有在怀疑安全性遭到破坏时才会出现的做法。此外，安全测试不应该是组织中单个工程师的责任，执行安全测试的原因和好处应该在整个公司得到理解，以便变得司空见惯。通过将安全测试添加到自动化的标准质量保证流程中，所有工程团队都会像检查日志文件或服务器性能指标一样熟悉安全测试。

负载压力测试

了解新网站性能的一个可靠方法是向性能监控服务开放它，然后对它进行分布式负载测试。有许多不同类型的负载测试，但它们主要分为两类:合成负载测试和分布式负载测试。合成负载测试通常涉及单个数据中心或地理位置中的一台服务器或一组服务器，同时对它们进行测试，以了解网站或应用程序在压力下的表现。在分布式负载测试中，有多台具有不同浏览器配置的服务器分布在一个国家或世界各地，然后在一个新的 web 应用程序中“播放”记录的或真实的流量。有许多方法可以收集这些记录，但是通常使用来自 web 服务器的访问日志来确定应该从浏览器请求应用程序的哪些 URL。这在多个服务器上同时发生，因此它模拟了来自不同地理区域的多个网络、浏览器和操作系统的真实用户活动。您永远无法提前知道一个应用程序在生产中的实际运行情况。当访问新创建的 web 应用程序时，真实的用户行为和配置几乎是不可能预测的。然而，您越接近模拟真实用户，压力测试就越准确，压力测试提供了大量关于 web 应用程序在顶端如何运行的信息，而不仅仅是闲置时的信息。

考虑一下去看医生。当你坐在医生的办公室里，完全放松时，你的血压可能很低，呼吸正常，心脏功能良好。但是，如果医生把你绑在跑步机上，进行同样的测量，结果可能会完全不同，可能会建议你下周末不要徒步旅行，而是呆在家里放松一下。网站性能测试也是一样的；如果不知道网站在遇到困难时会如何表现，就没有能力预测网站上线后的行为。

压力测试很有价值，因为:

*   它可以显示在正常负载下永远不会出现的错误。
*   它有助于容量规划工作。
*   它设定了衡量历史性能趋势的基线。

日志

在执行压力测试后查看应用程序和 web 服务器日志将提供大量有价值的信息，尤其是关于压力测试导致的错误的信息。了解这些错误将会避免在发布时出现太多的麻烦。压力测试的行为可能会导致底层 web 应用程序和数据存储出现问题，或者它们可能会完全失败。Logstash 之类的开源工具允许 web 开发人员和操作工程师查看错误，并将错误消息与诸如页面响应时间峰值之类的事件相关联。

为什么这如此重要？当一家老牌公司推出新产品、新功能、新网站或新应用时，全世界通常都会关注。在这种情况下，新产品的成败在很大程度上决定了公司的成败。以 MobileMe 为例:当 MobileMe 首次推出时，这项服务在最初的几周内几乎不起作用，苹果内部的团队在此期间没有离开办公室，试图解决问题。事实上，在接下来的几个月里，这项服务出现了很多故障，结果，受到了很多负面报道。这并没有建立起对这项服务的信心，尽管苹果做得很好，但它可能会影响用户对这项服务以及苹果在线服务的信心。

对于一些企业来说，一次糟糕的上市可能不会有太大的影响。对于一家首次公开上市的初创公司来说，这可能意味着公司的终结。这就是为什么了解空闲时间和最大容量时的性能如此重要。生产使用是如此随机和多样，以至于难以预测，所以花时间通过“踢轮胎”收集尽可能多的信息，甚至“拿起大锤”访问网站，将有助于确保公开发布是成功的，并且第一次访问服务的用户将会再次访问。

预发射

预发布阶段应该主要用于计划和协调各个团队如何合作来全面部署新的软件应用程序。拥有一份详细列出为确保成功发射需要按顺序进行的工作的清单，可以决定成功与否。公共关系和营销团队可能已经为媒体安排了有关新产品发布的新闻稿和其他通知，并且在发布当天可能会有很多人关注该应用程序。在部署成功后才分发新闻稿可能是更好的策略。然而，不管市场策略如何，拥有一个将应用程序投入生产的详细、逐步的计划是至关重要的。该计划还取决于网站或应用程序的设计方式。一些应用程序需要按顺序部署和启动；其他人可能有更异步的设计，但这不是必需的。一个经过深思熟虑并详细说明新产品发布团队各成员之间协调的发布计划对发布的成功有很大的贡献，它可能意味着应用程序的成功或失败。

制定备份计划也有助于降低启动全新网站或应用程序的相关风险。当新网站或应用程序第一次遇到生产流量时，如果出现意外的服务器崩溃或应用程序故障，它可能会使公司免受用户的批评和失望。

发布的黑暗面:人员的常见陷阱

发射过程中最常被忽视的一个方面是工程人员的精神和身体健康。这是发布过程中与代码审查和测试同样重要的一部分，应该被提及，因为当它被忽略时，启动新项目和产品*将会*失败。

不要低估启动一个新网站或应用程序的压力。当一个已经投入了数十、数百或数百万美元的新产品即将推出时，确保负责应用程序的*人员*状态良好就变得至关重要，他们将项目从创意一直带到最终用户。这是一个令人难以置信的压力巨大的过程，对于大版本来说可能需要很长时间(即使事情被安排在小版本中完成),所有利益相关者的全面参与是必要的，包括投资者、业务管理、开发和运营。需要从科学和工程的角度对待员工。如果开发和管理一个新的 web 应用程序的人表现很差，那么这个发布肯定会有更多的错误，最终会花费企业更多的钱，或者完全失败。

缺乏认可

人们想知道，他们为欣赏他们努力的经理付出了很长时间，放弃了很大一部分个人生活。没有人会被鼓励为管理层尽最大努力，因为他们认为项目只是另一种获取收入和满足截止日期的方式。那种盛气凌人的心态是让人想放弃一个项目的绝佳方式。那些知道自己的努力得到认可的人更有可能付出持续的努力来创建一个产品网站。

缺少员工

当承担一个新的软件项目时，管理层应该准备好相应的人员配备。短期项目，如推出网站的新模块或重新设计现有应用程序的某些方面，最好由专注于该任务的团队来完成。当一些开发和运营团队仅致力于维护现有的生产网站和服务，而其他团队则致力于构建新的网站和应用程序来支持业务增长和其他业务计划时，就会产生更好的产品。

因此，管理层必须正确评估可用的工程人员，以确保有足够的人员承担新项目。如果不考虑当前员工的能力，员工很容易变得过于分散，无法完成正常的维护或开发新产品，质量和产量可能会因此受到影响。

跟踪同步项目的数量、新应用程序或网站的下一个主要版本以及可用的员工，并将这些人适当分配到项目中，将会带来更高的产出和更高质量的产品。

睡眠不足

当启动一个新的网站或应用程序时，睡眠不足可能是对生产力的最大威胁。研究表明，睡眠不足不仅会影响员工的产量，还会导致事故，影响判断力 [<sup>1</sup>](#Fn00061) 。工程人员负担过重几乎肯定会影响他们的睡眠时间。最优秀的工程师对他们正在从事的项目感到非常投入，并且几乎将这些项目内化，他们将几乎不间断地从事这些项目。有一些工程师需要被命令回家，因为他们开始致力于他们的工作。这些工程师是高产者，他们尤其需要被告知回家休息，因为他们不会主动回家休息。

在互联网和网络公司的世界里，有一种深夜文化，在这种文化中，工程师们被期望工作很长时间，在一些极端的情况下，几乎是在工作中生活，并且在办公室度过 8-14 个小时后在家登录。在特殊情况下，这可能是必要的，例如击败竞争对手推出一种产品，但在一个组织内使这成为一种文化期望是一种灾难性的失败，因为它需要工程人员付出代价。

确保团队人员配备得当是解决员工疲惫问题的第一步。如果经济条件不允许雇用新的人员或承包商，组织应该考虑哪些项目具有最高优先级，并把他们的努力投入到这些工作中。

管理层应该确保工程人员不会在与工作相关的项目上花费不必要的时间。许多工程师会花时间在与工作相关的项目上，因为他们觉得如果他们不这样做，那么他们就忽视了自己的责任，即使他们很可能忽视了工作之外的个人责任。这尤其适用于操作工程人员。管理层有责任让他们的工程师明白，不必要的加班实际上会损害而不是帮助企业。

奖励超额完成者的文化，那些总是工作从不休息的人，实际上可能会破坏那些以更有纪律的方式超越的人的成就。这种文化导致人们筋疲力尽，而不是长期生产，他们几乎总是增加发射中的问题和错误。

成功发射:防止烧毁

为发射做准备是一个项目最重要的部分之一，它涉及到对人的能力的考虑。一个公司要想成功，就必须在新产品发布的过程中考虑到人们的身体和精神能力。不幸的是，一些公司失去了大量的员工，因为他们在推出时对待员工不好，让他们过度工作，没有保持士气。管理层通常只想在截止日期前完成并推出新产品，而工程团队则想花些时间陪伴家人，或许还有时间做工作以外的事情。这两个目标经常直接冲突，但也不一定如此。

专门的团队

防止在一个项目中筋疲力尽的最重要的部分是为一个项目分配足够的员工，并允许他们专注于一个项目。实际上，多任务处理是不可能的——这只会分散注意力，效率低下，而且试图让人们并行开发多个网站或主要网络产品会导致精疲力竭和士气低落。因此，每个产品或网站最好有一个专门的团队。在一个大型组织中，最好将软件工程和操作工程团队与子团队轮换，子团队的重点是主要构建和发布新产品。可能有一个维护人员，其工作是永久支持已经投入使用的网站和应用程序，而不是正在开发的网站和应用程序，还有一个单独的专门团队，负责创建和构建新的网站和应用程序。两者的结合实际上可能会产生最好的结果，因为那些忙于维护现有应用程序的人通常最了解新的功能和站点如何与已经投入生产的服务相结合。通过这种方式，那些建立新网站或产品的人不会脱离已经存在的东西，不能产生收入或给公司带来积极利益的产品和服务可以被弃用和退役，这些资源可以投入到新的工作中。

特殊项目团队的轮换

特殊项目团队的开发人员和操作工程师应根据新开发项目的长度和范围，每月、每两个月或每半年定期轮换一次。这有助于特殊项目团队的工程师通过不断解决问题，然后又有新的问题要解决来保持他们的技能。大约 50%的特殊项目团队成员应该留在项目中，以避免知识的大量流失，以免新项目一旦完成就开始失败。这 50%可能是团队领导，代表特殊项目团队的“基础”。

另外 50%应该整合到维护企业核心属性的 web 开发人员和操作工程师中。这是为了确保没有新站点和应用程序实践经验的工程师可以直接与有经验的工程师一起工作，这是传递知识和制作良好文档的最有效方法。

做最坏的打算

项目经理应该及时为 web 开发项目中的重大灾难做准备。例如，如果一个关键的利益相关者，比如软件工程总监，因为健康问题需要休息几个月，这可能会影响新产品的预计发布日期。这可能会影响商业交易和合同以及现有的法律义务，并在整个过程中造成紧张局势。如果在开发过程中增加了额外的时间，公司就更有可能避免严重的后果。当然，甚至不需要大规模的灾难来影响项目的时间表；许多小的延误累积起来会完全打乱时间表。项目和产品经理以及工程人员都需要在给定的时间内达成一致。三个月是推出一个新的网络应用的理想时间，六个月是一个全新的网站。这些都是松散的预测，并且会根据预算和人力资源而变化，但是在大多数情况下，人们往往会失去兴趣，或者竞争对手会在更长的时间内击败你。不管他们是否成功，他们仍然抢了你的风头。避免一个过于激进的时间表将有利于整个开发团队和辅助团队。

在将新软件产品投入生产的过程中保持健康和士气实际上会产生加速效应，并且从长远来看会使整个公司和组织受益。通过设定合理的时间表和不使人们过度工作，团队将能够更有效地实现他们的目标，并在身体和精神上感觉更好，这将有助于公司随着时间的推移留住最好的人才，这比让*可能会也可能不会*给公司带来任何收入或利益的*一个*网站出局更重要。

在产品发布期间让人们保持精力充沛

我在一家公司工作，在我在那里的几年里，那里有很多人死亡。这是否与过度工作有关，是我和以前的同事们非常好奇和争论的话题。然而，在任何情况下，不把员工健康放在生产启动的首要位置几乎肯定会对启动的整体成功产生负面影响。

构建软件和推出一个新网站，重新设计整个网站，或者给网站添加复杂的功能，都很像参加铁人三项赛。耗费大量的精神能量会使人感到和耗费体力一样疲惫，甚至可能需要更长的时间才能恢复。此外，当人们受到虐待时，软件和操作工程师的不满情绪会传染，并可能在工作环境中产生多米诺骨牌效应。如果这种情况发生在一家公司试图推出其最新、最棒的产品时，这可能会给这一努力带来灾难，因为只有少数专注的个人承担了项目的大部分。

成功指标

在推出新软件用于生产之前，需要进行大量的规划、讨论和研究，并且通常采取渐进的方法，以便不使公司的品牌冒太大的风险。如果一切都已正确执行，生产代码中的 bug 数量将是最小的；致力于并构建项目的团队的士气将会一直保持高昂；最重要的是，最终用户会有很好的反应。

最终用户是主要的成功指标，通过它来鉴定和量化投入生产的新代码，点击量是成功的第一个指标，尽管在功能或网站出现在媒体上之前，或者在新用户发现产品并开始谈论它之前，可能会有延迟的响应，从而导致更多的人看一看并试用它。您还需要查看一些指标，比如在新功能推出后，有多少用户浏览了网站的其他部分。当你在一个现有的网站上添加新的功能时，通常会鼓励用户看看并尝试他们以前没有尝试过的网站的其他部分。

投诉和反馈是衡量产品发布成功的其他方式。如果用户在使用新功能或新网站时遇到困难，网站上的某种反馈机制，如故障单系统或客户服务电子邮件地址，让他们寻求帮助，那么关于如何在网站上做某些事情的问题就会越来越多。此类查询的大量增加可能表明某些用户体验和设计考虑正在造成困难。在一个集中的控制面板中跟踪各种指标可以提供对发布成功的可见性。量化一个产品化 web 发布的成功度量确实很困难，当度量系统都是不同的时候，集中度量就变得更加困难。然而，这样做将对展示一次发射有多成功产生巨大的影响，并且随着时间的推移将继续这样做。推出新的网站和功能有一定的节奏，不仅涉及良好的技术，如自动化、源代码管理和部署机制，还涉及团队如何计划、测试和实现新发布的方式和态度。在将软件投入生产时，紧迫感更强，发生意外事件的可能性也更大，因此启动需要一种不同的方法，而不仅仅是维护现有代码或监控已经运行的生产站点。

使一次发射成功

简而言之，上市通常并不容易。但是，以下五个步骤应该有助于指导您完成这一过程:

1.  继续提醒人们他们的努力在公司和特定计划中有多重要。这不仅应该来自直接经理，还应该来自公司自上而下的各个层面，包括高管。首席技术官或首席执行官每年的表扬不足以保持士气。
2.  如果可以的话，在特别难熬的一周，每年进行一次公司赞助的健康检查。
3.  为项目管理设定现实的目标。
4.  减少你开会的次数。每天的会议浪费了每个人的时间，降低了生产力和士气(“不是另一个无意义的会议”)。
5.  提供鼓励人们远离电脑和鼓励体育锻炼的渠道，因为体育锻炼可以提升人们的情绪。快乐的软件开发者意味着快乐的代码和发布时间。

摘要

推出新的网络应用程序和网站需要所有人都参与进来，并在很长一段时间内积极合作。有一个适当的计划和分配工作，并分配足够的人员到项目中，将会产生一个更好的产品，并在最后期限前完成。虽然设计和测试软件以支持网站的许多要素与维护现有应用程序或扩展其功能的要素相同，但在发布新网站或应用程序时，更强调这些方面。

IT 组织忽略了发布的许多人的方面，事实上，他们是确保成功发布的最关键因素。这意味着经理和管理层必须考虑到员工的福利和健康，即使是以最后期限或目标为代价。每个企业都需要运营，满足最后期限，并实现盈利，但有时误解的是，组织需要让人们过度工作以实现这些目标，而事实恰恰相反。确保有足够的人来从事一个新项目，并确保一旦项目启动，它将得到充分的维护，这应该是启动的规划阶段的组成部分，这可以通过查看人们在现有项目上工作的小时数、项目需要多少维护以及这可能如何影响可用于开发未来项目的员工来估计。及时考虑所有这些问题将使未来的发射更加顺利。

[<sup>1</sup>](#_Fn00061)T0】